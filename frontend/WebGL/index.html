<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WebGL | YUHUI&#39;S Dev-Notes</title>
    <meta name="description" content="日常开发技术总结笔记，技术答疑！">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    
    <link rel="preload" href="/Developer-notes/assets/css/0.styles.676ffd4a.css" as="style"><link rel="preload" href="/Developer-notes/assets/js/app.9ca3cd04.js" as="script"><link rel="preload" href="/Developer-notes/assets/js/37.ec5cb400.js" as="script"><link rel="prefetch" href="/Developer-notes/assets/js/10.01d11ca3.js"><link rel="prefetch" href="/Developer-notes/assets/js/11.2b8dd230.js"><link rel="prefetch" href="/Developer-notes/assets/js/12.6298d3e3.js"><link rel="prefetch" href="/Developer-notes/assets/js/13.9c077031.js"><link rel="prefetch" href="/Developer-notes/assets/js/14.058a2157.js"><link rel="prefetch" href="/Developer-notes/assets/js/15.9900ee6e.js"><link rel="prefetch" href="/Developer-notes/assets/js/16.4587a3a3.js"><link rel="prefetch" href="/Developer-notes/assets/js/17.5b77fd45.js"><link rel="prefetch" href="/Developer-notes/assets/js/18.40e15717.js"><link rel="prefetch" href="/Developer-notes/assets/js/19.4b29d712.js"><link rel="prefetch" href="/Developer-notes/assets/js/2.37d8e32e.js"><link rel="prefetch" href="/Developer-notes/assets/js/20.2249a9a1.js"><link rel="prefetch" href="/Developer-notes/assets/js/21.a95616b9.js"><link rel="prefetch" href="/Developer-notes/assets/js/22.b49c0aef.js"><link rel="prefetch" href="/Developer-notes/assets/js/23.6903dc94.js"><link rel="prefetch" href="/Developer-notes/assets/js/24.cbd60039.js"><link rel="prefetch" href="/Developer-notes/assets/js/25.71394ec6.js"><link rel="prefetch" href="/Developer-notes/assets/js/26.1490817c.js"><link rel="prefetch" href="/Developer-notes/assets/js/27.c721559e.js"><link rel="prefetch" href="/Developer-notes/assets/js/28.22713b83.js"><link rel="prefetch" href="/Developer-notes/assets/js/29.67919cbd.js"><link rel="prefetch" href="/Developer-notes/assets/js/3.ef190807.js"><link rel="prefetch" href="/Developer-notes/assets/js/30.6c81aa37.js"><link rel="prefetch" href="/Developer-notes/assets/js/31.37cb33b9.js"><link rel="prefetch" href="/Developer-notes/assets/js/32.d7b10612.js"><link rel="prefetch" href="/Developer-notes/assets/js/33.93ce0faf.js"><link rel="prefetch" href="/Developer-notes/assets/js/34.80528f5f.js"><link rel="prefetch" href="/Developer-notes/assets/js/35.28454fb9.js"><link rel="prefetch" href="/Developer-notes/assets/js/36.17d2471a.js"><link rel="prefetch" href="/Developer-notes/assets/js/38.da0bcd9f.js"><link rel="prefetch" href="/Developer-notes/assets/js/39.00de1477.js"><link rel="prefetch" href="/Developer-notes/assets/js/4.26a43768.js"><link rel="prefetch" href="/Developer-notes/assets/js/40.2a65a882.js"><link rel="prefetch" href="/Developer-notes/assets/js/41.c422d9e5.js"><link rel="prefetch" href="/Developer-notes/assets/js/42.6aa8eaed.js"><link rel="prefetch" href="/Developer-notes/assets/js/43.76eca484.js"><link rel="prefetch" href="/Developer-notes/assets/js/44.bb64d422.js"><link rel="prefetch" href="/Developer-notes/assets/js/45.f5254139.js"><link rel="prefetch" href="/Developer-notes/assets/js/5.710896d2.js"><link rel="prefetch" href="/Developer-notes/assets/js/6.dc32a1d5.js"><link rel="prefetch" href="/Developer-notes/assets/js/7.6592e037.js"><link rel="prefetch" href="/Developer-notes/assets/js/8.753b4984.js"><link rel="prefetch" href="/Developer-notes/assets/js/9.08f8ef81.js">
    <link rel="stylesheet" href="/Developer-notes/assets/css/0.styles.676ffd4a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Developer-notes/" class="home-link router-link-active"><!----> <span class="site-name">YUHUI'S Dev-Notes</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Developer-notes/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Developer-notes/about/" class="nav-link">About</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Google
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/Developer-notes/frontend/index.html" class="nav-link">前端</a></div><div class="nav-item"><a href="/Developer-notes/backend/index.html" class="nav-link">后端</a></div><div class="nav-item"><a href="/Developer-notes/embedded/index.html" class="nav-link">嵌入式</a></div><div class="nav-item"><a href="/Developer-notes/computerbasic/index.html" class="nav-link">计算机基础</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Developer-notes/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Developer-notes/about/" class="nav-link">About</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Google
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/Developer-notes/frontend/index.html" class="nav-link">前端</a></div><div class="nav-item"><a href="/Developer-notes/backend/index.html" class="nav-link">后端</a></div><div class="nav-item"><a href="/Developer-notes/embedded/index.html" class="nav-link">嵌入式</a></div><div class="nav-item"><a href="/Developer-notes/computerbasic/index.html" class="nav-link">计算机基础</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Developer-notes/about/" class="sidebar-link">本站简介</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>前端</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/Developer-notes/frontend/" class="sidebar-link">前端基础</a></li><li><a href="/Developer-notes/frontend/React/" class="sidebar-link">React</a></li><li><a href="/Developer-notes/frontend/React/ReactNative.html" class="sidebar-link">React Native</a></li><li><a href="/Developer-notes/frontend/Vue/" class="sidebar-link">Vue 相关</a></li><li><a href="/Developer-notes/frontend/Angular/" class="sidebar-link">Angular</a></li><li><a href="/Developer-notes/frontend/module-bundler/" class="sidebar-link">打包工具</a></li><li><a href="/Developer-notes/frontend/MiniProgram/" class="sidebar-link">小程序</a></li><li><a href="/Developer-notes/frontend/nodejs/" class="sidebar-link">node.js</a></li><li><a href="/Developer-notes/frontend/Performance/" class="sidebar-link">Performance</a></li><li><a href="/Developer-notes/frontend/mobileweb/" class="sidebar-link">Mobile Web</a></li><li><a href="/Developer-notes/frontend/Network/" class="sidebar-link">常用网络</a></li><li><a href="/Developer-notes/frontend/WebGL/Canvas.html" class="sidebar-link">Canvas</a></li><li><a href="/Developer-notes/frontend/WebGL/" class="active sidebar-link">WebGL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Developer-notes/frontend/WebGL/#进阶" class="sidebar-link">进阶</a></li><li class="sidebar-sub-header"><a href="/Developer-notes/frontend/WebGL/#需要补一些图形学的知识" class="sidebar-link">需要补一些图形学的知识</a></li><li class="sidebar-sub-header"><a href="/Developer-notes/frontend/WebGL/#过程踩坑" class="sidebar-link">过程踩坑</a></li><li class="sidebar-sub-header"><a href="/Developer-notes/frontend/WebGL/#一些函数的规范" class="sidebar-link">一些函数的规范</a></li></ul></li><li><a href="/Developer-notes/frontend/WebGL/GLSL.html" class="sidebar-link">GLSL 手册</a></li><li><a href="/Developer-notes/frontend/TypeScript/" class="sidebar-link">TypeScript</a></li><li><a href="/Developer-notes/frontend/Regexp/" class="sidebar-link">正则</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>后端</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>嵌入式</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="webgl">WebGL</h1> <p>WebGL 技术储备。</p> <h3 id="webgl-demo-3d-参考网站">WebGL demo &amp; 3D 参考网站</h3> <ul><li><a href="https://www.x3dom.org/" target="_blank" rel="noopener noreferrer">x3dom<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://stack.gl/" target="_blank" rel="noopener noreferrer">stack.gl<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://threejs.org/" target="_blank" rel="noopener noreferrer">three.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://aframe.io/" target="_blank" rel="noopener noreferrer">A-Frame<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.mapbox.com/help/glossary/mapbox-gl/" target="_blank" rel="noopener noreferrer">MapboxGL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://rainbowhunt.me/" target="_blank" rel="noopener noreferrer">Rain sound generator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="入门初级知识">入门初级知识</h3> <ul><li><a href="https://webglfundamentals.org/" target="_blank" rel="noopener noreferrer">WebGL Fundamentals<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &amp; https://zhuanlan.zhihu.com/p/47454989,简体翻译是一个人。</li></ul> <p>参考文章:</p> <ul><li><a href="https://xieguanglei.github.io/blog/post/webgl-handbook.html" target="_blank" rel="noopener noreferrer">WebGL 技术储备指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</li></ul> <p><strong>知识储备</strong></p> <ul><li>类型化数组</li> <li>矩阵变换</li> <li>着色器和光栅化</li> <li>程序</li> <li>深度检测</li> <li>顶点索引</li> <li>纹理</li> <li>混合与蒙版</li> <li>浏览器的 WebGL 系统</li> <li>光照</li> <li>复杂模型</li> <li>动画。动画的原理就是快速地擦除和重绘。常用的方法是大名鼎鼎的 requestAnimationFrame。不熟悉的同学，可以参考<a href="http://www.cnblogs.com/rubylouvre/archive/2011/08/22/2148797.html" target="_blank" rel="noopener noreferrer">司徒正美<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>和张鑫旭的介绍。</li> <li>WebGL 库。WebGL 流行的库， Three.js。</li> <li>调试工具。<a href="http://benvanik.github.io/WebGL-Inspector/" target="_blank" rel="noopener noreferrer">WebGL Inspector<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>WebGL 同 Canvas 一样，需要获取绘图上下文：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> gl <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;webgl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 或者 expermental-webgl</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Canvas 画一个矩形是很简单的，但是 WebGL 就不一样了。</p> <p>同样需要获取绘图上下文：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> gl <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;webgl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 或 experimental-webgl</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例如这个样子，画一个矩形：</p> <iframe height="265" scrolling="no" title="webgl-rectangle" src="//codepen.io/alvinmi/embed/QPprQj/?height=265&theme-id=0&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="allowfullscreen" style="width: 100%;">
  See the Pen <a href="https://codepen.io/alvinmi/pen/QPprQj/">webgl-rectangle</a> by YuHui
  (<a href="https://codepen.io/alvinmi">@alvinmi</a>) on <a href="https://codepen.io">CodePen</a>.
</iframe> <p>类型化数组:</p> <p>WebGL 涉及复杂计算需要提前知道数值的精度，而标准的 JavaScript 数值无法满足需求。为此，WebGL 引入一个概念，叫做 <strong>类型化数组</strong>(typed arrays)。类型化数组也是数组，只不过元素被设置为特定类型的值。</p> <p>类型化数组的核心就是一个名为 <strong>ArrayBuffer</strong> 的类型。每个 ArrayBuffer 对象表示的只是内存中指定的字节数，但不会指定这些字节用于保存什么类型的数据。通过 ArrayBuffer 能做的，就是为将来使用而分配一定数量的字节。例如，下面这行代码会在内存中分配 20B。(和 C 的缓存一个意思么？)</p> <p>WebGL 中使用的各种类型化数组:</p> <table><thead><tr><th style="text-align:left">数组类型</th> <th style="text-align:center">每个元素所占字节数</th> <th style="text-align:right">描述(C 语言中的数据类型)</th></tr></thead> <tbody><tr><td style="text-align:left">Int8Array</td> <td style="text-align:center">1</td> <td style="text-align:right">8 位整型数(signed char)</td></tr> <tr><td style="text-align:left">UInt8Array</td> <td style="text-align:center">1</td> <td style="text-align:right">8 位无符号整型数(unsigned char)</td></tr> <tr><td style="text-align:left">Int16Array</td> <td style="text-align:center">2</td> <td style="text-align:right">16 位整型数(signed short)</td></tr> <tr><td style="text-align:left">UInt16Array</td> <td style="text-align:center">2</td> <td style="text-align:right">16 位无符号整型数( unsigned short)</td></tr> <tr><td style="text-align:left">Int32Array</td> <td style="text-align:center">4</td> <td style="text-align:right">32 位整型数(signed int)</td></tr> <tr><td style="text-align:left">UInt32Array</td> <td style="text-align:center">4</td> <td style="text-align:right">32 位无符号整型数(signed int)</td></tr> <tr><td style="text-align:left">Float32Array</td> <td style="text-align:center">4</td> <td style="text-align:right">单精度 32 位浮点数(float)</td></tr> <tr><td style="text-align:left">Float64Array</td> <td style="text-align:center">6</td> <td style="text-align:right">双精度 64 位浮点数(double)</td></tr></tbody></table> <p>类型化数组不支持 <code>push()</code> 和 <code>pop()</code> 方法。创建类型化数组的唯一方法就是使用 new 运算符。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> ArrayBuffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用 ArrayBuffer(数组缓冲器类型)就是用来创建数组缓冲器视图。(高程 15 章 WebGL 相关内容)。</p> <p>如果 <code>getContext()</code> 无法创建 WebGL 上下文，有的浏览器会抛出错误，所以，最好把调用封装到一个 <code>try-catch</code> 块中。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;drawing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  gl<span class="token punctuation">;</span>

<span class="token comment">// 确定浏览器是否支持 &lt;canvas&gt; 元素</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    gl <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;experimental-webgl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 什么也不做</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;can't use WebGL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>gl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 WebGL</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Use WebGL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;WebGL context could not be created.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>绘图前准备</strong></p> <p>实际操作 WebGL 上下文前，一般会使用实色清楚 <code>&lt;canvas&gt;</code>, 为绘图前做准备, 首先必须使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/clearColor" target="_blank" rel="noopener noreferrer">clearcolor()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 方法来指定要使用的颜色值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>gl<span class="token punctuation">.</span><span class="token function">clearColor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// black</span>

<span class="token comment">// get current clear value</span>
gl<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_CLEAR_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>视口与坐标</strong></p> <p>视口与坐标: 绘图之前需要定义 WebGL 的 viewport，是相对于 canvas 元素。</p> <ul><li>1.视口坐标与网页坐标不一样，视口坐标原点是在 canvas 元素的左下角，x,y 轴分别是向右和向上；</li> <li>2.视口内部的坐标系于定义视口的坐标系也是不一样的。在视口内部，坐标原点(0,0)是视口的中心点，因此视口左下角坐标为(-1,-1), 而右上角坐标为(1,1)。</li></ul> <p><strong>缓冲区</strong></p> <p>顶点信息保存在 JavaScript 数组中，使用之前必须转到 WebGL 的缓冲区。创建缓冲区，可以调用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebGLRenderingContext/createBuffer" target="_blank" rel="noopener noreferrer">gl.createBuffer()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，然后使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebGLRenderingContext/bindBuffer" target="_blank" rel="noopener noreferrer">gl.bindBuffer()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 绑定到 WebGL 上下文，就可以用数据来填充缓冲区了，如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> buffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
gl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">STATIC_DRAW</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用缓冲区对象向顶点着色器传入多个顶点的数据，遵循下面五个步骤。</p> <ul><li>1.创建缓冲区对象: <code>gl.createBuffer()</code></li> <li>2.绑定缓冲区对象: <code>gl.bindBuffer()</code></li> <li>3.将数据写入缓冲区对象: <code>gl.bufferData()</code></li> <li>4.将缓冲区对象分配给一个 attribute 变量: <code>gl.vertexAttribPointer()</code></li> <li>5.开启 attribute 变量: <code>gl.enableVertexAttribArray()</code></li></ul> <p>包括 WebGL 系统创建缓冲区对象方式:</p> <ul><li><code>gl.createBuffer()</code> =&gt; <code>deleteBuffer(buffer)</code> 删除被 <code>gl.createBuffer()</code> 创建出来的缓冲区对象</li> <li>gl.ARRAY_BUFFER</li> <li>gl.ELEMENT_BUFFER</li></ul> <p>当执行完这 5 步后, 意味着缓冲区对象和 attribute 变量之间的连接局真正建立起来了。</p> <p>可以使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/drawArrays" target="_blank" rel="noopener noreferrer">gl.disableVertexAttribArray()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，来关闭分配。</p> <p><strong>着色器</strong></p> <p>着色器(shader)是 OpenGL 中的另一个概念。WebGL 中有两种：</p> <ul><li>1.顶点着色器，用于将 3D 顶点转换为需要渲染的 2D 点；</li> <li>2.片段(或像素)着色器，用于准确计算要绘制的每个像素的颜色。</li></ul> <p>不过着色器的独特之处在于不是用 JavaScript 写的，而是用 GLSL(OpenGL Shading Language)，与 C 和 JavaScript 语言不同。</p> <p>为着色器传递数据的方式有两种属性：</p> <ul><li>1.Attribute，通过 Attribute 可以向顶点着色器中传入顶点信息；</li> <li>2.Uniform，通过 Uniform 可以想任何着色器传入常量值。</li></ul> <p>着色器程序，可以写在自定义 script 标签里，因为浏览器不能理解 GLSL，那么就要准备好字符串形式的 GLSL 程序。</p> <p>有了 字符串形式的 GLSL 程序后，就是创建着色器对象 <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/createShader" target="_blank" rel="noopener noreferrer">gl.createShader()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, 传入要创建的着色器类型 ()。</p> <p><strong>绘图</strong></p> <p>WebGL 只能绘制三种状态：点、线、三角。其他的状态都是由这三种形状合成之后，再绘制到三维空间中。</p> <ul><li>1.<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/drawArrays" target="_blank" rel="noopener noreferrer">gl.drawArray()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，用于数组缓冲区；</li> <li>2.<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/drawElements" target="_blank" rel="noopener noreferrer">gl.drawElements()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，用于元素数组缓冲区。</li></ul> <p>调试：</p> <ul><li>GLSL 不能打印的时候只能去猜这个变量到底是个什么值？给每个像素的颜色 RGB 设定为这个值，观察绘制变化，通过颜色去验证数值正不正确</li> <li>Chrome-WebGL 插件：WebGL Inspector 、WebGL Insight</li></ul> <p><strong>创建纹理贴图</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/** 创建纹理贴图
 *
 *
 *
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>参考书籍</strong></p> <p>英文：很多，去 MDN、Google、Github 搜。</p> <p>中文：</p> <ul><li><a href>WebGL 入门指南</a>，其实是一个 three.js 教程。</li> <li><a href>WebGL 高级编程：开发 Web 3D 图形</a></li> <li><a href>WebGL 编程指南</a>, 目前再看(后面复杂的等用到的时候再翻出来详细查)。这本书的<a href="https://www.amazon.com/WebGL-Programming-Guide-Interactive-Graphics/dp/0321902920/ref=sr_1_1?ie=UTF8&qid=1409015819&sr=8-1&keywords=webgl+programming+guide" target="_blank" rel="noopener noreferrer">英文版<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="_1-webgl-程序-网页-软件结构？">1.WebGL 程序(网页)软件结构？</h3> <p>WebGL 程序使用三种语言开发：HTML、JavaScript 和 GLSL ES——然后由于着色器代码 GLSL ES 内嵌在 JavaScript 中，所以 WebGL 网页的文件结构和传统网页是一样的。</p> <h3 id="_2-webgl-如何使用-canvas-元素并在其上绘图？">2.WebGL 如何使用 <code>&lt;canvas&gt;</code> 元素并在其上绘图？</h3> <p>只需要添加 canvas 元素，获取上下文即可。遵循的流程如下：</p> <ul><li>1.获取 canvas 元素</li> <li>2.获取 WebGL 绘图上下文</li> <li>3.初始化着色器</li> <li>4.设置 canvas 背景色</li> <li>5.清除 canvas</li> <li>6.绘图</li></ul> <h4 id="_2-1-html-文件如何引入-webgl-javascript-文件？">2.1.HTML 文件如何引入 WebGL JavaScript 文件？</h4> <ul><li>直接本地引用，例如书中的 <code>lib</code> 文件的下的 JavaScript 文件；</li> <li>CND 引用；</li></ul> <h3 id="_3-html-文件和用-javascript-编写的-webgl-代码文件的连接？">3.HTML 文件和用 JavaScript 编写的 WebGL 代码文件的连接？</h3> <p>...</p> <p>将位置信息从 JavaScript 传递给顶点着色器：</p> <ul><li>Attribute 变量， 传输与顶点相关的数据；</li> <li>Uniform 变量， 传输对于所有顶点都相同(或者与顶点无关的数据)。</li></ul> <p>使用哪一个变量取决于需要传输的数据本身。</p> <p>使用 Attribute 变量，实例程序需要包含的步骤,一般如下:</p> <ul><li>1.在顶点着色器中，声明 Attribute 变量；</li> <li>2.将 Attribute 变量赋值给 gl_Position 变量；</li> <li>3.向 Attribute 变量传输数据。</li></ul> <p>Attribute 这个关键词被称为<strong>储存限定符</strong>(storage qualifier), Attribute 变量必须声明为全局变量，数据将从外部传给该变量。格式如：<code>&lt;储存限定符&gt;</code> <code>&lt;类型&gt;</code> <code>&lt;变量名&gt;</code>。</p> <p>一个约定，所有 Attribute 变量声明都是以 <code>a_</code> 开头, Uniform 变量都以 <code>u_</code> 开头，这点和 C 语言很像。</p> <h3 id="_4-简单的-webgl-绘图函数？">4.简单的 WebGL 绘图函数？</h3> <p>绘制一个点，原点(0.0, 0.0, 0.0)处就在 canvas 的中心位置。开始只将了用矩形画一个点，第十章中提到了画一个圆点。</p> <h3 id="_5-着色器程序在-webgl-中的地位？">5.着色器程序在 WebGL 中的地位？</h3> <p>着色器是 WebGL 的一项重要机制，它会贯穿全文。</p> <p>着色器是以为字符串的形式嵌入在 JavaScript 文件中。</p> <ul><li>顶点着色器(Vertex Shader)，描述顶点特性(如位置、颜色)，顶点指二位或三维空间的一个点(端点或交点)；</li> <li>片元着色器(Fragment Shader)，进行逐片元处理过程(如光照)，片元 WebGL 术语，理解为像素(图像的单元)。</li></ul> <p>如下显示了程序的执行流程, 用 sketchboard 画的比较简陋：</p> <img src="https://raw.githubusercontent.com/AlvinMi/2019-Pic/master/2019/20190408033142.jpg"> <h3 id="_6-齐次坐标系？">6.齐次坐标系？</h3> <p>其次坐标使用<code>(x, y, z, w)</code>表示，等价于三维坐标系<code>(x/w, y/w, z/w)</code>。所以齐次坐标第 4 个分量是 1，就可以当做三维坐标来使用，进而使得<strong>矩阵乘法</strong>来描述顶点，通常使用齐次坐标表示顶点的三维坐标。</p> <h3 id="_7-顶点着色器是怎么执行的">7.顶点着色器是怎么执行的?</h3> <h3 id="_8-获取着色器程序的方式？">8.获取着色器程序的方式？</h3> <p>利用 JavaScript 中创建字符串的方式创建 GLSL 字符串：串联的方式(concatenating), Ajax 请求下载，多行模板数据。或者使用非 js 类型的标签。大多数使用模板、串联等方式。</p> <h3 id="x-三角形的关键作用，以及-webgl-对绘制三角形的支持？">x.三角形的关键作用，以及 WebGL 对绘制三角形的支持？</h3> <h3 id="x-使用多个三角形绘制出其他图形？">x.使用多个三角形绘制出其他图形？</h3> <h3 id="x-使用方程对三角形进行基本的变换-如平移、旋转和缩放等？">x.使用方程对三角形进行基本的变换,如平移、旋转和缩放等？</h3> <h3 id="x-矩阵可以简化变换的运算？">x.矩阵可以简化变换的运算？</h3> <h3 id="x-在矩阵库的帮助下，探索如何实现简单的动画？">x.在矩阵库的帮助下，探索如何实现简单的动画？</h3> <h3 id="x-顶点着色器和片元着色器之间的光栅化过程，将图形转化为了片元？">x.顶点着色器和片元着色器之间的光栅化过程，将图形转化为了片元？</h3> <h3 id="x-如何将图像-或纹理-贴到图形或模型的表面。">x.如何将图像(或纹理)贴到图形或模型的表面。</h3> <p>纹理坐标系(Texture Coordinates)</p> <h3 id="x-如何在三维空间中表示观察者，如何控制可视的三维空间体积？">x.如何在三维空间中表示观察者，如何控制可视的三维空间体积？</h3> <h3 id="x-裁剪，物体的前后关系？">x.裁剪，物体的前后关系？</h3> <h3 id="x-绘制一个三维物体——立方体。">x.绘制一个三维物体——立方体。</h3> <h3 id="x-光照？">x.光照？</h3> <ul><li>着色、阴影和不同类型的光源产生的光，包括点光源光、平行光和环境光</li> <li>三维场景中两种主要的反射光类型：漫反射和环境反射</li> <li>着色的细节，以及如何实现光照效果时候=场景更像是三维的</li></ul> <h3 id="x-层次模型？">x.层次模型？</h3> <p>层次模型能够使复杂模型，如游戏角色、机器人，甚至是真人模型产生动作，而不仅仅是生硬的立方体。</p> <h3 id="x-高级技术">x.高级技术</h3> <p>...</p> <h3 id="x-webgl-为什么无须像-opengl-那样交换缓冲区？">x.WebGL 为什么无须像 OpenGL 那样交换缓冲区？</h3> <blockquote><p>《WebGL 编程指南》- 附录 WebGL 为什么不需要交换缓冲区。</p></blockquote> <h3 id="glsl-es-1-0-内置函数">GLSL ES 1.0 内置函数</h3> <h3 id="投影矩阵">投影矩阵</h3> <p>Matrix4.setOrtho() 函数和 Matrix4.setPerspective() 函数生成的投影矩阵。</p> <h3 id="x-webgl-opengl-左手还是右手坐标系？">x.WebGL/OpenGL 左手还是右手坐标系？</h3> <p>从技术上解释为什么说 WebGL 和 OpenGL 对采取左手左边系和右手坐标系是中立的</p> <h3 id="x-逆转值矩阵">x.逆转值矩阵</h3> <p>解释了模型矩阵的逆转值矩阵为什么卡原用来变换法向量。</p> <h3 id="x-如何从文件中加载着色器程序？">x.如何从文件中加载着色器程序？</h3> <ul><li>利用加载三维模型文件的方法；(参考附录 F)</li></ul> <h3 id="x-世界坐标系和本地坐标系">x.世界坐标系和本地坐标系?</h3> <p>两种不同的坐标系统，以及如何在三维入刑中使用？</p> <p>WebGL 坐标系统，笛卡尔坐标系，观察者的眼睛位于原点(0.0, 0.0, 0.0),默认使用右手坐标系。现在认为右手坐标系，有专门说 <strong>WebGL/OpenGL：左手坐标系还是右手坐标系？</strong> 实际上，两者都不是。</p> <p>WebGL 的坐标系和 canvas 绘图区的坐标系不同，需要将前者映射到后者，默认情况下对应关系如下：</p> <ul><li>canvas 中心点(0.0, 0.0, 0.0);</li> <li>canvas 的上边缘和下边缘(-1.0, 0.0, 0.0) 和 (1.0, 0.0, 0.0);</li> <li>canvas 的左边缘和右边缘(0.0, -1.0, 0.0) 和 (0.0, 1.0, 0.0)。</li></ul> <img src="https://raw.githubusercontent.com/AlvinMi/2019-Pic/master/2019/20190411225455.png"> <blockquote><p>图片来自 http://nickdesaulniers.github.io/RawWebGL/#/33</p></blockquote> <h3 id="x-webgl-的浏览器设置">x.WebGL 的浏览器设置</h3> <p>介绍浏览器的高级设置方法，以确保 WebGL 程序能够正确运行，以及程序不能正确运行时对应的方法。</p> <h4 id="支持-webgl-的浏览器">支持 WebGL 的浏览器</h4> <p>WebGL 被 Chrome、Firefox、Safari、Opera 浏览器支持。</p> <p>但是 IE9 并不支持 WebGL，Chrome 还支持一些有用的特性，如调试 WebGL 的控制台函数。</p> <ul><li>参考页面(获取最新的、关于可能导致问题的硬件列表): https://www.khronos.org/webgl/wiki/BlacklistsAndWhitelists</li> <li>《WebGL 编程指南》的帮助网站：https://sites.google.com/site/webglbook/</li></ul> <p>《WebGL 编程指南》排版约定：</p> <ul><li><strong>粗体 Blod</strong>——术语或重要词汇首次出现；</li> <li>斜体<em>Italic</em>——函数参数名、或引用名、程序名或文件名；</li> <li>Monospace 字体——实例代码、方法、函数、变量、命令行选项、JavaScript 对象名称、HTML 标签名称。</li></ul> <h3 id="什么是-gpgpu-只有-example，木有资料？">什么是 GPGPU? 只有 example，木有资料？</h3> <ul><li>https://github.com/keijiro/Firefly</li></ul> <h2 id="进阶">进阶</h2> <ul><li>WebGL-Next</li> <li>WebGL-insight</li></ul> <h2 id="需要补一些图形学的知识">需要补一些图形学的知识</h2> <ul><li>图形学基本原理和进阶原理</li></ul> <p><a href="http://mecg.me/wiki/doku.php?id=cg:index" target="_blank" rel="noopener noreferrer">图形学<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>贴图、纹理、材质的区别？</p> <p>在实践中的大致层级关系是： 材质(Material) 包含贴图(Map), 贴图包含纹理(Textture)。</p> <p>Map 是 Textture 的容器，定义了纹理如何被 3D 物体使用。</p> <h2 id="过程踩坑">过程踩坑</h2> <h3 id="_1">1.</h3> <p>...</p> <h2 id="一些函数的规范">一些函数的规范</h2> <p>书中介绍的一些函数(WebGL API 接口)，是可以直接查文档的，为了加深印象，自己还是多少写一写。</p> <p><strong>gl.getAttribLocation()</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>gl<span class="token punctuation">.</span><span class="token function">getAttribLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @func gl.getAttribLocation(program, name)
 * @desc 获取由 name 参数指定 attribute 变量的储存地址
 * @param {object} program - 参数 program 指定包含顶点着色器和片元着色器的着色器程序对象
 * @param {string} name    - 指定想要获取其储存地址 attribute 变量的名称
 * @returns {number}
 *          返回大于或等于0  - Attribute 变量的储存地址
 *          返回-1         - 指定的 Attribute 变量不存在，或者其命名具有 gl_ 或者 webgl_ 前缀
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>gl.vertexAttrib3f(a_Position, v0, v1, v2);</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @func gl.vertexAttrib3f(location, v0, v1, v2)
 * @desc 将数据(v0,v1,v2) 传给由 location 参数指定的 Attribute 变量
 * @param {GLuint} location - 指定将要修改顶点 Attribute 变量的存储位置。
 * @param {float number} v0～v3  - 设置顶点 attibute 变量的各分量值
 * @returns null
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Developer-notes/frontend/WebGL/Canvas.html" class="prev">
          Canvas
        </a></span> <span class="next"><a href="/Developer-notes/frontend/WebGL/GLSL.html">
          GLSL 手册
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/Developer-notes/assets/js/app.9ca3cd04.js" defer></script><script src="/Developer-notes/assets/js/37.ec5cb400.js" defer></script>
  </body>
</html>
